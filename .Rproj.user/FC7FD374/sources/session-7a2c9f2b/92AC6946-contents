<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="reshape2">
<title>Example_analysis • reshape2</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.7/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Example_analysis">
<meta property="og:description" content="reshape2">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">reshape2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.4.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Example_analysis.html">Example_analysis</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/hadley/reshape/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Example_analysis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/hadley/reshape/blob/HEAD/vignettes/Example_analysis.Rmd" class="external-link"><code>vignettes/Example_analysis.Rmd</code></a></small>
      <div class="d-none name"><code>Example_analysis.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="load-r-packages">Load R Packages<a class="anchor" aria-label="anchor" href="#load-r-packages"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">using.packages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'reshape2'</span>,<span class="st">'tidyverse'</span>,<span class="st">'paletteer'</span>,<span class="st">'readr'</span>,<span class="st">'here'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mask.packages</span> <span class="op">&lt;-</span> <span class="op">!</span><span class="va">using.packages</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">mask.packages</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">using.packages</span><span class="op">[</span><span class="va">mask.packages</span><span class="op">]</span>,repos <span class="op">=</span> <span class="st">"http://cran.us.r-project.org"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># read in required packages</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">using.packages</span><span class="op">)</span>, <span class="va">require</span>, character.only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: reshape2</span></span>
<span><span class="co">#&gt; Loading required package: tidyverse</span></span>
<span><span class="co">#&gt; Warning: package 'lubridate' was built under R version 4.3.2</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Attaching core tidyverse packages</span> ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr    </span> 1.1.3     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr    </span> 2.1.4</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats  </span> 1.0.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr  </span> 1.5.0</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2  </span> 3.4.3     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble   </span> 3.2.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">lubridate</span> 1.9.3     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr    </span> 1.3.0</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr    </span> 1.0.2</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use the conflicted package (<span style="color: #0000BB; font-style: italic;">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors</span></span>
<span><span class="co">#&gt; Loading required package: paletteer</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Loading required package: here</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; here() starts at C:/Users/zono2/OneDrive/Documents/R projects/2nd_term_statistical_programming_projects/Project_3/reshape</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[5]]</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-and-question">Data and Question<a class="anchor" aria-label="anchor" href="#data-and-question"></a>
</h2>
<p>In this example analysis, we are going to use the <strong>Dog
Breeds</strong> dataset from tidytuesday. We are interested in finding
out what breed of dog is most favored and what traits makes them more
desirable than others.</p>
<p>Link to the original data: <a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2022/2022-02-01/readme.md" class="external-link uri">https://github.com/rfordatascience/tidytuesday/blob/master/data/2022/2022-02-01/readme.md</a></p>
<p>Data Dictionary: <a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2022/2022-02-01/readme.md#data-dictionary" class="external-link uri">https://github.com/rfordatascience/tidytuesday/blob/master/data/2022/2022-02-01/readme.md#data-dictionary</a></p>
</div>
<div class="section level2">
<h2 id="load-data">Load Data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># tests if a directory named "data" exists locally</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span> </span>
<span><span class="va">rda_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'breed_traits.rda'</span>,<span class="st">'breed_rank_all.rda'</span><span class="op">)</span></span>
<span><span class="co">## Check whether we have all data files</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="va">rda_files</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co">## If we don't, then download the data</span></span>
<span>  <span class="va">breed_traits</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-02-01/breed_traits.csv'</span><span class="op">)</span></span>
<span>  <span class="va">breed_rank_all</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-02-01/breed_rank.csv'</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">## Then save the data objects to rda files</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">breed_traits</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"breed_traits.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">breed_rank_all</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"breed_rank_all.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"breed_traits.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"breed_rank_all.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fix space in breed_traits</span></span>
<span><span class="va">breed_traits</span> <span class="op">&lt;-</span> <span class="va">breed_traits</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Breed <span class="op">=</span> <span class="fu">str_replace_all</span><span class="op">(</span><span class="va">Breed</span>,<span class="st">'[[:space:]]'</span>,<span class="st">' '</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="analysis">Analysis<a class="anchor" aria-label="anchor" href="#analysis"></a>
</h2>
<p>Clear unrelated columns from rank dataset</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">breed_rank_all_df</span> <span class="op">&lt;-</span> <span class="va">breed_rank_all</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">links</span>,<span class="va">Image</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">breed_rank_all_df</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 195 × 9</span></span></span>
<span><span class="co">#&gt;    Breed `2013 Rank` `2014 Rank` `2015 Rank` `2016 Rank` `2017 Rank` `2018 Rank`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Retr…           1           1           1           1           1           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Fren…          11           9           6           6           4           4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Germ…           2           2           2           2           2           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Retr…           3           3           3           3           3           3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Bull…           5           4           4           4           5           5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Pood…           8           7           8           7           7           7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Beag…           4           5           5           5           6           6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Rott…           9          10           9           8           8           8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Poin…          13          12          11          11          10           9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Dach…          10          11          13          13          13          12</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 185 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: `2019 Rank` &lt;dbl&gt;, `2020 Rank` &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Here we utilize the <code><a href="../reference/melt.html">melt()</a></code> function from the
<code>reshape2</code> package to convert the rank dataset to long
format.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">long_brt</span> <span class="op">&lt;-</span> <span class="va">breed_rank_all_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/melt.html">melt</a></span><span class="op">(</span>id.vars <span class="op">=</span> <span class="st">'Breed'</span><span class="op">)</span></span>
<span><span class="va">long_brt</span> <span class="op">&lt;-</span> <span class="va">long_brt</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu">str_extract</span><span class="op">(</span><span class="va">variable</span>, <span class="st">'[0-9]+'</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu">map_dbl</span><span class="op">(</span><span class="va">variable</span>,<span class="va">as.numeric</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/rename.html" class="external-link">rename</a></span><span class="op">(</span>year <span class="op">=</span> <span class="va">variable</span>, rank <span class="op">=</span> <span class="va">value</span><span class="op">)</span></span>
<span><span class="fu">as_tibble</span><span class="op">(</span><span class="va">long_brt</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,560 × 3</span></span></span>
<span><span class="co">#&gt;    Breed                          year  rank</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Retrievers (Labrador)          <span style="text-decoration: underline;">2</span>013     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> French Bulldogs                <span style="text-decoration: underline;">2</span>013    11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> German Shepherd Dogs           <span style="text-decoration: underline;">2</span>013     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Retrievers (Golden)            <span style="text-decoration: underline;">2</span>013     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Bulldogs                       <span style="text-decoration: underline;">2</span>013     5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Poodles                        <span style="text-decoration: underline;">2</span>013     8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Beagles                        <span style="text-decoration: underline;">2</span>013     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Rottweilers                    <span style="text-decoration: underline;">2</span>013     9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Pointers (German Shorthaired)  <span style="text-decoration: underline;">2</span>013    13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Dachshunds                     <span style="text-decoration: underline;">2</span>013    10</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,550 more rows</span></span></span></code></pre></div>
<p>We then calculate the rank sum of from the converted rank dataset</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rank_sum</span> <span class="op">&lt;-</span> <span class="va">long_brt</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_rank <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">rank</span><span class="op">)</span>, rank_sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">rank</span><span class="op">)</span>,.by<span class="op">=</span><span class="va">Breed</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">rank_sum</span><span class="op">)</span> </span>
<span><span class="va">top10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rank_sum</span><span class="op">$</span><span class="va">Breed</span>,n<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu">as_tibble</span><span class="op">(</span><span class="va">rank_sum</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 195 × 3</span></span></span>
<span><span class="co">#&gt;    Breed                         mean_rank rank_sum</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Retrievers (Labrador)              1           8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> German Shepherd Dogs               2.12       17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Retrievers (Golden)                3.12       25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Bulldogs                           4.62       37</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Beagles                            5.62       45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> French Bulldogs                    5.75       46</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Poodles                            7          56</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Rottweilers                        8.5        68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Yorkshire Terriers                 9          72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Pointers (German Shorthaired)     10.5        84</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 185 more rows</span></span></span></code></pre></div>
<p>In the plot below, we visualize top 10 dogs with the smallest rank
sum (top ranked) to examine how does the rank change over the years.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">color_pal</span> <span class="op">&lt;-</span> <span class="fu">paletteer_d</span><span class="op">(</span><span class="st">"ggsci::category10_d3"</span><span class="op">)</span></span>
<span><span class="va">long_brt</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Breed</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">top10</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Breed <span class="op">=</span> <span class="fu">fct_relevel</span><span class="op">(</span><span class="va">Breed</span>,<span class="va">top10</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">rank</span>, group <span class="op">=</span> <span class="va">Breed</span>, fill <span class="op">=</span> <span class="va">Breed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">Breed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">Breed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co"># scale_colour_discrete()</span></span>
<span>    <span class="fu">scale_color_manual</span><span class="op">(</span>values<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">color_pal</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu">scale_y_reverse</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co"># Adjust text style</span></span>
<span>    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">'Top 10 Ranked Dogs Over Years'</span>,</span>
<span>         subtitle <span class="op">=</span> <span class="st">'Most top ranked dogs maintain stable rank. A few dogs display steady trend of change'</span>,</span>
<span>         caption <span class="op">=</span> <span class="st">'Shu Luan'</span><span class="op">)</span></span></code></pre></div>
<p><img src="Example_analysis_files/figure-html/plot%201%20top%2010%20dog%20rank%20over%20the%20year-1.png" width="700"></p>
<p>Most top ranked dogs are pretty stable in their ranking. However,
dogs like Beagles and Yorkshire Terriers display a steady decline in
ranking. French Bulldog shows the most notable ranking increase.</p>
<p>Since we wish to work with numerical values in the trait score data,
we need to find which column is not numeric.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check if the scores are all numerical values</span></span>
<span><span class="va">not_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="op">!</span><span class="fu">map_lgl</span><span class="op">(</span>.x <span class="op">=</span> <span class="va">breed_traits</span>, .f <span class="op">=</span> <span class="va">is.numeric</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">not_num</span></span>
<span><span class="co">#&gt; [1] "Breed"       "Coat Type"   "Coat Length"</span></span></code></pre></div>
<p>Here we use <code><a href="../reference/cast.html">dcast()</a></code> function from the
<code>reshape2</code> package to convert the long data back to wide form
for better visualization.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">top10_trait_mean</span> <span class="op">&lt;-</span> <span class="va">long_brt</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rank</span> <span class="op">&lt;=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">breed_traits</span>, by <span class="op">=</span> <span class="st">'Breed'</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Breed</span>,<span class="va">rank</span>,<span class="va">`Coat Type`</span>,<span class="va">`Coat Length`</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise_at</span><span class="op">(</span><span class="fu">vars</span><span class="op">(</span><span class="va">`Affectionate With Family`</span><span class="op">:</span><span class="va">`Mental Stimulation Needs`</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="va">mean</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/melt.html">melt</a></span><span class="op">(</span>id.vars <span class="op">=</span><span class="st">'year'</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu">str_replace_all</span><span class="op">(</span><span class="va">variable</span>,<span class="st">'_mean'</span>,<span class="st">''</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/rename.html" class="external-link">rename</a></span><span class="op">(</span>Trait <span class="op">=</span> <span class="va">variable</span>, Mean_score <span class="op">=</span> <span class="va">value</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">Mean_score</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">top10_trait_mean</span> <span class="op">&lt;-</span> <span class="va">top10_trait_mean</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Trait <span class="op">=</span> <span class="fu">fct_relevel</span><span class="op">(</span><span class="va">Trait</span>, <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">top10_trait_mean</span><span class="op">$</span><span class="va">Trait</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">as_tibble</span><span class="op">(</span><span class="fu"><a href="../reference/cast.html">dcast</a></span><span class="op">(</span><span class="va">top10_trait_mean</span>, <span class="va">year</span><span class="op">~</span><span class="va">Trait</span><span class="op">)</span><span class="op">)</span> <span class="co"># use dcast to convert the long data to wide format</span></span>
<span><span class="co">#&gt; Using Mean_score as value column: use value.var to override.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 15</span></span></span>
<span><span class="co">#&gt;    year `Affectionate With Family` Good With Young Childr…¹ `Trainability Level`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">2</span>013                        4.6                      4.4                  4.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">2</span>014                        4.6                      4.6                  4.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">2</span>015                        4.6                      4.6                  4.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">2</span>016                        4.6                      4.6                  4.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">2</span>017                        4.7                      4.6                  4.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>  <span style="text-decoration: underline;">2</span>018                        4.7                      4.6                  4.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>  <span style="text-decoration: underline;">2</span>019                        4.7                      4.4                  4.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span>  <span style="text-decoration: underline;">2</span>020                        4.7                      4.4                  4.5</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated name: ¹​`Good With Young Children`</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11 more variables: `Adaptability Level` &lt;dbl&gt;, `Playfulness Level` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Openness To Strangers` &lt;dbl&gt;, `Mental Stimulation Needs` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Good With Other Dogs` &lt;dbl&gt;, `Watchdog/Protective Nature` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Energy Level` &lt;dbl&gt;, `Shedding Level` &lt;dbl&gt;, `Barking Level` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Coat Grooming Frequency` &lt;dbl&gt;, `Drooling Level` &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Now we are interested in seeing if the mean trait scores shared by
top ranked dogs change over the year.</p>
<p>Higher scored traits are more desirable. Lower scored traits are less
desirable.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">top10_trait_mean</span> <span class="op">%&gt;%</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">Trait</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_col</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>,y<span class="op">=</span><span class="va">Mean_score</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="va">.</span><span class="op">~</span><span class="va">Trait</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">xlab</span><span class="op">(</span><span class="st">'Year'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">'Mean score of each trait in top 10 dogs of each year'</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">'Friendly traits are more welcomed while difficulties in grooming are less desirable.'</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">'Shu Luan'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>strip.text<span class="op">=</span><span class="fu">element_text</span><span class="op">(</span>face<span class="op">=</span><span class="st">'bold'</span><span class="op">)</span>,legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Example_analysis_files/figure-html/plot2-1.png" width="700"></p>
<p>We can see the top four desirable traits involve friendliness within
the family and the ease of keeping them as pet. We define top desirable
traits as: Affectionate With Family, Good With Young Children,
Trainability Level, Adaptability Level.</p>
<p>Conversely, we define a collection of less desirable traits with
lower scores among top ranked dogs as: Shedding Level, Barking Level,
Coat Grooming Frequency, and Drooling Level. These traits are associated
with cleaning difficulty and possible noise concerns in the house.</p>
<p>Then we manipulate the data table to calculate the mean scores of the
two categories for all dogs.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rank_df</span> <span class="op">&lt;-</span> <span class="va">rank_sum</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">breed_traits</span>,by<span class="op">=</span><span class="st">'Breed'</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">`Coat Type`</span>,<span class="va">`Coat Length`</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rank_sum</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">as_tibble</span><span class="op">(</span><span class="va">rank_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 175 × 17</span></span></span>
<span><span class="co">#&gt;    Breed        mean_rank rank_sum Affectionate With Fa…¹ Good With Young Chil…²</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Retrievers …      1           8                      5                      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> German Shep…      2.12       17                      5                      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Retrievers …      3.12       25                      5                      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Bulldogs          4.62       37                      4                      3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Beagles           5.62       45                      3                      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> French Bull…      5.75       46                      5                      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Poodles           7          56                      5                      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Rottweilers       8.5        68                      5                      3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Yorkshire T…      9          72                      5                      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Pointers (G…     10.5        84                      5                      5</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 165 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated names: ¹​`Affectionate With Family`, ²​`Good With Young Children`</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 12 more variables: `Good With Other Dogs` &lt;dbl&gt;, `Shedding Level` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Coat Grooming Frequency` &lt;dbl&gt;, `Drooling Level` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Openness To Strangers` &lt;dbl&gt;, `Playfulness Level` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Watchdog/Protective Nature` &lt;dbl&gt;, `Adaptability Level` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Trainability Level` &lt;dbl&gt;, `Energy Level` &lt;dbl&gt;, `Barking Level` &lt;dbl&gt;, …</span></span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rank_trait_score</span> <span class="op">&lt;-</span> <span class="va">rank_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>top_desirable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">rank_df</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Affectionate With Family'</span>,<span class="st">'Good With Young Children'</span>,<span class="st">'Trainability Level'</span>,<span class="st">'Adaptability Level'</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>less_desirable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">rank_df</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Shedding Level'</span>,<span class="st">'Coat Grooming Frequency'</span>,<span class="st">'Drooling Level'</span>,<span class="st">'Barking Level'</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>log_rank_sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">rank_sum</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">top_desirable</span>,<span class="va">less_desirable</span>,<span class="va">log_rank_sum</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/melt.html">melt</a></span><span class="op">(</span>id.vars <span class="op">=</span> <span class="st">'log_rank_sum'</span><span class="op">)</span></span>
<span><span class="fu">as_tibble</span><span class="op">(</span><span class="va">rank_trait_score</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 350 × 3</span></span></span>
<span><span class="co">#&gt;    log_rank_sum variable      value</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         2.08 top_desirable  5   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2.83 top_desirable  5   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3.22 top_desirable  5   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         3.61 top_desirable  3.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         3.81 top_desirable  3.75</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         3.83 top_desirable  4.75</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         4.03 top_desirable  4.75</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         4.22 top_desirable  4.25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         4.28 top_desirable  4.75</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>         4.43 top_desirable  4.75</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 340 more rows</span></span></span></code></pre></div>
<p>We can plot a scatter plot to visualize the association between the
mean trait score and the log rank sum.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rank_trait_score</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/rename.html" class="external-link">rename</a></span><span class="op">(</span>Mean_score <span class="op">=</span> <span class="va">value</span>, Trait_type <span class="op">=</span> <span class="va">variable</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Mean_score</span>, x <span class="op">=</span> <span class="va">log_rank_sum</span>, group <span class="op">=</span> <span class="va">Trait_type</span>, color <span class="op">=</span> <span class="va">Trait_type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">xlab</span><span class="op">(</span><span class="st">'Log rank sum'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ylab</span><span class="op">(</span><span class="st">'Mean trait scores'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">'Mean trait score association with log rank sum'</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">'Lower rank sum (top ranked) dogs have near perfect desirable trait scores, \nwhile higher rank sum dogs have more variable trait scores.'</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">'Shu Luan'</span><span class="op">)</span> </span></code></pre></div>
<p><img src="Example_analysis_files/figure-html/plot%203%20association-1.png" width="700"></p>
<p>As we can see from the plot, we can conclude that most highly ranked
dogs have near perfect scores in top desirable traits while they might
not have the lowest scores in less desirable traits. In summary, a
favorable dog breed as house pet should at least have very friendly
behaviors and should not be troublesome to groom and clean.</p>
</div>
<div class="section level2">
<h2 id="functions-used">Functions used<a class="anchor" aria-label="anchor" href="#functions-used"></a>
</h2>
<p><code>tidyverse</code>: select, rename, filter, summarise, arrange,
mutate, str_extract, str_replace</p>
<p><code>ggplot2</code>: geom_col, geom_point, geom_line,
facet_wrap()</p>
<p><code>purr</code>: map_dbl, map_lgl</p>
<p><code>reshape2</code>: melt, dcast</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Hadley Wickham.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7. Class assignment by <strong>Shu Luan</strong>.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
